<div class="container py-5">
  <div class="col-lg-8 offset-lg-2">
    <div class="card shadow-lg border-0 rounded-4">
      <div class="card-header bg-primary text-white rounded-top-4">
        <h2 class="h4 mb-0">📋 Lista de Citas</h2>
      </div>

      <div class="card-body bg-light">
        {{#if citas}}
          <ul class="list-group mb-4">
            {{#each citas}}
              <li class="list-group-item d-flex justify-content-between align-items-start">
                <div>
                  <h5 class="fw-bold mb-1">{{nombre}} <small class="text-muted">({{servicio}})</small></h5>
                  <p class="mb-1"><strong>Fecha:</strong> {{fecha}}</p>
                  <p class="mb-0"><strong>Precio:</strong> S/ {{precio}}</p>
                </div>
                <div class="d-flex flex-column gap-2">
                  <a href="/edit-cita/{{id}}" class="btn btn-outline-secondary btn-sm">
                    ✏️ Editar
                  </a>
                  <a href="/delete-cita/{{id}}" class="btn btn-outline-danger btn-sm">
                    🗑️ Eliminar
                  </a>
                </div>
              </li>
            {{/each}}
          </ul>
        {{/if}}

        <h4 class="text-dark mb-3">{{#if cita.id}}Editar Cita{{else}}Registrar Nueva Cita{{/if}}</h4>
        <form action="{{#unless cita.id}}/new-cita{{else}}/update-cita/{{cita.id}}{{/unless}}" method="POST">
          <div class="row g-3">
            <div class="col-md-6">
              <label for="nombre" class="form-label">Nombre</label>
              <input
                type="text"
                name="nombre"
                class="form-control"
                placeholder="Nombre del cliente"
                value="{{cita.nombre}}"
                required
              />
            </div>
            <div class="col-md-6">
              <label for="servicio" class="form-label">Servicio</label>
              <input
                type="text"
                name="servicio"
                class="form-control"
                placeholder="Ej. Corte de cabello"
                value="{{cita.servicio}}"
                required
              />
            </div>
            <div class="col-md-6">
              <label for="fecha" class="form-label">Fecha</label>
              <input
                type="date"
                name="fecha"
                class="form-control"
                value="{{cita.fecha}}"
                required
              />
            </div>
            <div class="col-md-6">
              <label for="precio" class="form-label">Precio (S/)</label>
              <input
                type="number"
                name="precio"
                class="form-control"
                placeholder="Ej. 30"
                value="{{cita.precio}}"
                min="0"
                step="0.10"
                required
              />
            </div>
          </div>

          <div class="mt-4 d-flex justify-content-between">
            {{#if cita.id}}
              <button type="submit" class="btn btn-success">💾 Actualizar</button>
              <a href="/" class="btn btn-secondary">Cancelar</a>
            {{else}}
              <button type="submit" class="btn btn-primary w-100">📌 Registrar Cita</button>
            {{/if}}
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
